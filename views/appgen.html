<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Project Wing</title>

		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="author" content="Sumukh Sridhara">

		<!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- Le styles -->
		<link href="/assets/css/bootstrap.min.css" rel="stylesheet">
		<link href="/assets/css/bootstrap-responsive.min.css" rel="stylesheet">
		<link href="/assets/css/wing.css" rel="stylesheet">
            <script src="http://code.jquery.com/jquery-latest.js"></script>

  <script src="http://staging.tokbox.com/v0.91/js/TB.min.js"></script>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

 </script>

  
 <script type="text/javascript">
  filepicker.getFile(filepicker.MIMETYPES.ALL, {'modal': true},
         function(url, metadata){
             alert('You just uploaded '+metadata.filename+'! '+
                   'You can access the file at '+url);
         }
     );

    var apiKey = {{apikey}};
    var sessionId = {{sessionId}};
    var token = 'devtoken';           
     
    TB.setLogLevel(TB.DEBUG);     
 
    var session = TB.initSession(sessionId);      
    session.addEventListener('sessionConnected', sessionConnectedHandler);
    session.addEventListener('streamCreated', streamCreatedHandler);      
    session.connect(apiKey, token);
 
    var publisher;
     var publisher2;

    function sessionConnectedHandler(event) {
      publisher = session.publish('myPublisherDiv');

      // Subscribe to streams that were in the session when we connected
      subscribeToStreams(event.streams);
    }
     
    function streamCreatedHandler(event) {
      // Subscribe to any new streams that are created

      subscribeToStreams(event.streams);
    }
     					

function publisherResizeHandler(event) {
    newWidth = event.widthTo;
    newHeight = event.heightTo;
    // Modify the UI based on the new dimensions of the publisher 
}

    function subscribeToStreams(streams) {
      for (var i = 0; i < streams.length; i++) {
        // Make sure we don't subscribe to ourself
        if (streams[i].connection.connectionId == session.connection.connectionId) {
          return;
        }
 
        // Create the div to put the subscriber element in to
        var div = document.createElement('div');
        div.setAttribute('id', 'stream' + streams[i].streamId);
		console.log( document.getElementById('test2') );
	//	document.getElementById("test2")[0].appendChild('div'); //append new div to another 
	//	$('#test2').append('div');
		var pele = document.getElementById("test2");
		pele.appendChild(div);



        // Subscribe to the stream
        session.subscribe(streams[i], div.id);

      }

var div = document.createElement('div');
div.setAttribute('id', 'publisher');
var publisherContainer = document.getElementById('publisherContainer');
publisherContainer.appendChild(div);
publisher = session.publish('publisher');
					
publisher.addEventListener("resize", publisherResizeHandler);

function publisherResizeHandler(event) {
    newWidth = event.widthTo;
    newHeight = event.heightTo;
    // Modify the UI based on the new dimensions of the publisher 
}

    }
  </script>
<script type="text/javascript">
function changeText(txt){
    document.getElementById('freetitle').innerHTML = txt;
}
</script>

    <script type="text/javascript">

        $(document).ready(function() {

$('#fistpage').load('bye.html');

document.getElementById('first').style.width = '100%'; 

        });    
        
        function addsecond(){
var active = 0;

        document.getElementById('first').style.width = ''; 
$('#secondpage').load('herro.html');

document.getElementById('second').style.visibility = 'visible'; 
var active = 1;

}
        function removesecond(){
        document.getElementById('first').style.width = '100%'; 

document.getElementById('second').style.visibility = 'hidden'; 



}



    </script>

                  <script type="text/javascript" src="https://api.filepicker.io/v0/filepicker.js"></script>

    <!--
        Now we get down to the meat of the program - using filepicker.io to get a link to a file.
        If want to learn more about the capabilities of filepicker.io, check out our documentation at
        https://developers.filepicker.io/v0/
    -->
    <script type="text/javascript">
        window.onload = function(){
            // You've got to let filepicker.io know who you are! Your apikey and more can be found at
            // https://developers.filepicker.io/home/
            filepicker.setKey('kUW3Y87kQaqOFO0OhaVn');

            // When you click the big button, launch the filepicker
            document.getElementById("getLink").onclick = function(){
                // The syntax of the getFile call is:
                //     filepicker.getFile(mimetypes, options, callback)
                // Here, we want any sort of file and to use a modal window
                // This is a good place to play around with other options, etc. from the documentation
                filepicker.getFile(filepicker.MIMETYPES.ALL, {'modal':true}, function(url, metadata) {
                    // Now that we have the url and some information about the file,
                    // we show it to the user and set up the sharing links.
                    document.getElementById("url-result").setAttribute("value", url);
                    
                    alert(url);
                    
                    document.getElementById("email-result").setAttribute("href",
                        "mailto:?subject=A file for you: "+metadata.filename+"&body=You can grab it at "+url);
                    document.getElementById("tweet-result").setAttribute("href",
                        "http://twitter.com/intent/tweet?url="+encodeURIComponent(url)+
                        "&text=Look%20at%20my%20cool%20stuff:%20"+metadata.filename);

                    // Get the results section of the page
                    var results = document.getElementById("results");

                    // If the file is an image, we get really fancy and even show the thumbnail!
                    if (metadata.type.indexOf("image/") == 0) {
                        var img = document.createElement("img");
                        img.setAttribute("src", url);
                        img.setAttribute("alt", metadata.filename);
                        img.setAttribute("title", metadata.filename);
                        results.appendChild(img);
                    }
                    // Show the results (they were hidden before)
                    results.style.display = "block";
                });
            };
        };
    </script>




				<!--  <link rel="shortcut icon" href="favicon.ico">  -->
	</head>

	<body>
	

<!-- Navigation
================================================== -->

	<div class="navbar navbar-fixed-top">
		<div class="navbar">
			<div class="navbar-inner">
				<div class="container-fluid">

				<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</a>

				<a class="brand" href="index.html">
			<logo >Project Wing</logo>				
				</a>
				
						<div class="nav-collapse">
					<ul class="nav" id="findme">
						<!--<li><a href="#">Home</a></li>-->
					</ul>
		<ul class="nav  pull-right">
			<li><a href="#" class="signup-link"><strong>You are studying! </strong> &raquo; </a></li> <li><a data-toggle="modal" class="signup-link" href="#myModal" ><strong> Invite</strong> your friends</a>
</li>

		</ul>
				</div>
				</div>
			</div><!-- /navbar-inner -->
		</div><!-- /navbar -->
	</div><!-- /navbar-wrapper -->

<!-- Main content================================================== -->

<!-- Invite your friends modal -->
          <div id="myModal" class="modal hide fade">
            <div class="modal-header">
              <a class="close" data-dismiss="modal" >&times;</a>
              <h3>Invite your friends</h3>
            </div>
            <div class="modal-body">
              <h4>Share this url</h4>
              <p> URL HERE .</p>

            </div>
            <div class="modal-footer">
              <a href="#" class="btn" data-dismiss="modal" >Close</a>
                        <a href="#" class="btn btn-primary" data-dismiss="modal" >Share</a>

            </div>
          </div>


<div class="container-fluid">
      <div class="row-fluid">
        <div class="span3">

          <div class="well" style="background:#333333;">
                <div id="myPublisherDiv">You</div>
                <div id="test2">1</div>
                <div id="test2">2</div>
                <div id="test2">3</div>
                <div id="test2">4</div>


          </div><!--/.well -->
          
    <div class="well" align="center" style="background:#333333;">
            <button id="getLink" class="btn btn-large btn-primary">Files</button>

          <button class="btn btn-large btn-primary">Change View</button>
          
        <button id="journal" onclick="javascript:addsecond();"  class="btn btn-large btn-primary"> Journal</button>

<div id="url-result"> </div>
                              </div>
                              
                              
          <div class="well" style="background:#333333;">
          Activity Log
              <li class="nav-header">Thing 1</li>
              <li class="nav-header">Thing 2</li>

          </div>
        </div><!--/span-->


        <div class="span9">

          <div class="row-fluid">
            <div class="span6" id="first">

              <div id="fistpage" height="100%"  frameborder="0"></div>
            </div><!--/span-->
                        <div class="span6" id="second">
              <div id="secondpage" frameborder="0"></div>
            </div><!--/span-->

            </div><!--/span-->

          </div><!--/row-->
        </div><!--/span-->
      </div><!--/row-->

    </div>


<!-- Footer
================================================== -->

	</div> <!-- /.span9 -->
	</div> <!-- /.row-fluid -->
</body>
</div> <!-- /.container-fluid -->

</div> <!-- the wrapper layer -->
	<!-- The javascript -->
	<script src="/assets/js/bootstrap.collapse.js"></script>
	<script src="/assets/js/bootstrap-modal.js"></script>
	<script src="/assets/js/bootstrap-button.js"></script>
	<script src="/assets/js/bootstrap-tab.js"></script>
	<script src="/assets/js/bootstrap-alert.js"></script>
	<script src="/assets/js/bootstrap-scrollspy.js"></script>
	<script src="/assets/js/bootstrap-popover.js"></script>
	<script src="/assets/js/jquery.jigowatt.js"></script>

  </body>
</html>
